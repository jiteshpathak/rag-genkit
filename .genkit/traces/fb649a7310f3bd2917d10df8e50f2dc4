{"traceId":"fb649a7310f3bd2917d10df8e50f2dc4","spans":{"3a822790cb1ea629":{"spanId":"3a822790cb1ea629","traceId":"fb649a7310f3bd2917d10df8e50f2dc4","parentSpanId":"bdf553ee7f7a1446","startTime":1752353167656,"endTime":1752353168105.062,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"embedder","genkit:name":"googleai/text-embedding-004","genkit:path":"/{astradb/rag_app,t:action}/{googleai/text-embedding-004,t:action,s:embedder}","genkit:input":"{\"input\":[{\"content\":[{\"text\":\"some search term\"}],\"metadata\":{}}],\"options\":{}}","genkit:output":"{\"embeddings\":[{\"embedding\":[-0.015392093,0.010814189,-0.019259162,-0.008644523,0.0021153195,0.022872752,0.07370527,0.025318593,0.013248967,0.008330598,-0.04512705,0.034441862,0.070528425,-0.061836142,-0.0009510838,-0.07756516,-0.02941271,0.0018751745,-0.031865638,-0.030080318,-0.0285248,-0.024601115,0.007402558,-0.046320748,0.0045928103,-0.023182977,0.033086546,-0.008976724,0.026258897,-0.004765159,0.017373826,0.036625665,0.03224732,0.00911497,0.03910507,0.02050251,-0.007004069,0.016507918,-0.0072394935,-0.0900994,-0.03931899,0.068279535,-0.038371164,-0.021833057,-0.051045023,0.000041749296,0.04636294,0.023211885,-0.02979364,0.016110681,-0.016316054,-0.03650025,-0.037071858,0.032821342,0.003673445,-0.029647999,0.011696102,-0.025567682,0.03072332,0.013857162,0.0064854375,-0.026268162,-0.035537947,-0.007820034,0.015611012,-0.07444079,-0.016629167,-0.0026674208,-0.054856434,0.014498599,-0.036254756,0.04072483,-0.07025282,0.0037763165,-0.0018071954,-0.030013608,0.036222223,-0.022527037,-0.009445559,0.0364055,-0.060156174,0.021682598,0.082930185,0.08704988,0.008416172,0.014360546,-0.032781124,-0.031802468,-0.09370161,0.032586757,0.09490586,-0.014812983,-0.0045795823,0.038287424,0.085196584,-0.0030418634,-0.06661617,-0.09519329,0.041449007,0.062284738,0.004163728,0.038566597,0.03703748,-0.04357114,0.07335544,-0.017027767,-0.041138604,-0.016832186,-0.05314479,0.03884178,0.008316903,-0.05519509,0.05995805,-0.03091104,0.003451157,0.0049340357,-0.0072348537,-0.0004475381,0.028746618,-0.05464141,0.0066222083,0.0069519156,-0.015774714,0.029248402,0.0223182,-0.009604787,0.008657256,0.04756828,-0.011934412,-0.022663683,0.067096435,-0.13371669,0.012305711,0.004071215,-0.009996166,0.0008665919,0.034671303,-0.025693053,-0.055393487,-0.0072249672,-0.031551596,-0.003619623,-0.025020057,0.04473384,0.027015308,-0.017666716,-0.00019370258,0.031455167,-0.013655112,0.006519228,-0.042267438,-0.0481335,0.010651455,-0.0017441233,-0.022238754,0.039814122,0.021524794,0.0074265352,0.088736154,0.013348133,-0.011665817,0.0024102952,0.027636658,-0.057407983,-0.031873006,-0.016126465,-0.034085035,-0.056980714,0.031384617,-0.034569293,0.01534885,-0.05637881,-0.033741113,0.0026765845,0.0017580448,-0.0038711121,-0.025307173,-0.015639031,-0.03282426,0.022334373,0.04394985,0.03649186,-0.04013904,-0.036923505,0.014233641,0.009371276,-0.004647348,0.014154972,0.052762657,0.033999495,0.04225379,-0.020509658,-0.015868958,0.050220054,-0.0067578806,-0.000083615894,0.008352264,-0.06005446,-0.010431422,-0.010733056,-0.0030531492,0.023133678,-0.013901978,0.0059381593,-0.043676082,0.0066331713,-0.019542912,-0.049432054,0.02584939,-0.012351046,0.019787556,0.01677009,-0.032118183,-0.038843803,-0.051658925,-0.0030124795,0.007374784,-0.00085863465,0.04912801,0.002230746,-0.04494004,0.033186708,0.0017847752,0.07171717,0.011719161,-0.020685237,-0.054638505,0.0015385016,-0.03590366,-0.039946992,0.009533901,0.017627489,-0.03394278,0.014333597,0.015230744,0.06745702,0.03434725,-0.046956006,-0.008898991,0.01390063,0.034483775,-0.017652206,0.09002988,-0.020370731,0.027439898,0.07099179,0.018306606,0.041263003,0.018352488,-0.05819111,0.0032255233,-0.023763424,-0.065649666,-0.0464252,-0.03554758,-0.021540334,0.020969,-0.032074243,0.022106806,-0.008990467,0.026138322,-0.041363023,-0.010975205,-0.024633357,-0.03619333,-0.061125483,-0.0050311484,-0.0014255213,0.041895717,-0.034117237,0.039047986,-0.026288925,-0.0438431,-0.008710461,-0.03790356,0.020769104,-0.053948507,0.025420235,0.0017872325,-0.031472348,0.027323918,0.0006500184,0.0048355795,0.01338957,0.020068357,-0.024083082,-0.023480492,-0.015148848,-0.02218867,-0.02382185,0.024306446,0.024099607,0.078588754,-0.0089868605,0.037083443,-0.03892796,0.031748112,0.038707096,-0.0088691525,0.023643646,0.025848199,0.052545454,-0.038119033,-0.019017708,-0.025073228,0.00047919835,-0.049824223,-0.029619414,-0.027122667,0.010671797,0.011879028,0.04364537,-0.043326117,0.0028845638,-0.0019687156,0.007843747,-0.1264588,0.009686265,0.003320989,-0.0003343957,-0.009018592,-0.022134602,-0.045437567,0.005904792,0.04533954,-0.025262473,0.05318422,0.027232425,0.033518318,0.011844447,0.027041255,-0.009009389,0.030894786,-0.048319865,-0.009989186,0.037777744,-0.011764962,0.032985438,0.050895844,0.04099462,0.02045369,0.0117945,0.02973445,0.05844264,-0.049303617,-0.053443838,0.04213305,-0.028235126,0.012487629,-0.06134871,0.02384134,0.028657753,0.002045701,0.0026067402,-0.009314411,-0.025078328,0.013077834,0.021089764,0.03716352,0.030477919,-0.0029422217,-0.009729889,-0.04443732,-0.0026256677,-0.0238788,-0.042715725,0.036467616,0.050155576,0.00882192,-0.009592874,-0.0016181172,0.032850325,-0.054989118,-0.006608476,-0.015556919,-0.00002399918,-0.03998133,-0.023341203,-0.008036813,-0.079333805,-0.036106866,-0.04786003,0.005511282,0.0071365596,-0.020732228,0.0681991,-0.07309456,0.003121426,-0.010887536,-0.005101836,-0.059438836,0.055188056,-0.010938587,0.04592515,-0.00881804,0.020132823,0.021776136,0.005398878,0.0012001339,-0.008481935,0.01930846,0.0132038295,0.06424889,0.018794782,-0.0159688,0.017675003,0.051279552,0.0054259337,0.025068019,-0.01090363,0.004728081,-0.050196953,-0.072135866,0.02580802,-0.06335935,-0.04746642,0.00052399316,-0.015512109,-0.03166367,-0.0087070335,-0.023408731,-0.034832243,0.020504383,0.006438309,-0.010041773,-0.033535197,-0.04064433,0.0042247814,0.030146169,0.06174431,-0.00015842145,0.03620378,-0.07286131,0.026459156,-0.03378182,-0.017837636,-0.009776284,-0.04412945,-0.04376609,0.066569276,-0.049992137,-0.026205428,0.023809478,0.019112114,-0.061981075,0.025159447,-0.0047742105,-0.0033342764,-0.023572331,-0.071771905,-0.027504165,-0.008581029,0.012585581,-0.017798522,-0.059047822,0.00059790147,0.051323283,-0.05634822,-0.031930823,0.037659116,-0.0730519,-0.040820323,0.027114274,0.026798587,0.016945679,-0.019658837,-0.08278451,0.011458776,-0.00827728,-0.017103838,0.024932418,0.004350232,0.02095084,0.012961596,-0.0511989,0.040852983,0.008714907,0.021981237,0.02646603,0.024891453,-0.08091682,-0.0043741413,0.042245734,-0.00032212542,0.029010316,0.0016348623,-0.07908986,-0.010355157,0.01764386,-0.016172934,0.013610402,0.038522113,-0.011981905,-0.015861928,-0.030270481,-0.07634552,0.017408343,0.0017180227,0.02704382,0.04767005,0.06992294,-0.003941906,-0.022829229,-0.017483508,-0.056210395,-0.01916181,-0.06569772,-0.049375534,0.056516886,0.014278065,0.021378037,0.057956584,0.01512249,-0.0023850976,-0.025540559,0.0134986555,-0.05270858,0.008743658,0.0063516465,0.074256614,-0.036240518,-0.030989397,0.018315641,-0.02364031,-0.040945113,-0.07199039,0.040585082,-0.05573738,0.0215979,-0.011817615,-0.02959739,0.07342354,-0.00008877724,0.012070034,0.023775125,0.065441236,0.024600161,-0.038059343,0.07723888,0.046695966,-0.015438848,0.01319398,0.06912532,0.01668273,0.027209867,0.042249113,0.023868319,0.014002363,0.0128716575,0.084340334,-0.008582435,-0.029483756,0.0023836952,0.05852598,-0.017404307,-0.012140048,0.03516192,0.013066618,-0.012513865,-0.030474894,0.010758176,-0.0063201194,0.0076323003,-0.040720534,0.030497614,-0.020001959,-0.032574892,0.02357653,-0.03199809,-0.018878726,0.03218823,-0.008682543,0.0019077688,-0.020864913,0.035413895,0.03816484,-0.026931154,0.0462636,0.017893424,-0.023262614,0.028956972,0.0407701,0.072436914,0.03757469,-0.035156615,-0.0066808895,0.00093277806,-0.0008758297,0.018964576,0.075401664,-0.05285704,0.053153064,-0.001428012,-0.04429838,-0.0037450339,-0.009504221,-0.03231873,0.020463148,0.021645432,0.0040548993,0.02404383,0.0048583713,0.0028052737,-0.001391778,-0.028895395,-0.07208451,0.03242883,-0.09112796,0.0430632,-0.055429254,0.03766785,0.01027664,-0.0065162648,-0.041370567,-0.08616649,0.026522288,-0.021857657,-0.039896518,0.063224666,0.023373112,0.04314289,0.016176755,0.011248298,0.007728911,-0.013401624,-0.0075286548,-0.00861436,0.01793124,-0.011069814,-0.013253658,-0.023839775,0.015920427,0.014326503,-0.036511093,-0.012649771,0.0051929783,-0.011449518,0.027417382,0.028992806,-0.075708196,0.034672964,0.042700246,0.10216209,0.061012737,-0.10081648,0.02619932,0.0023912394,0.039154697,-0.00095952465,0.005615131,-0.005043281,0.051072996,-0.029640887,-0.010913057,-0.0054095476,0.017284963,-0.040894706,-0.048484027,0.006489245,-0.059356656,-0.0034405522,-0.06265341,0.043021176,0.000015138907,0.0062061003,0.012201677,-0.06667186,0.025872791,0.0073645352,-0.01151446,0.0041761934,-0.01723007,0.000046439487,0.08468545,-0.0032613524,-0.017257597,-0.00016470056,0.0067817387,-0.044116016,-0.00869808,0.00006115717,-0.03335981,-0.008546099,0.006916421,-0.036809474,-0.014655784,0.044562124,0.018751029,-0.024646206,-0.0037295467,0.0047146506,-0.025672661,0.013376489,-0.002248231,0.0018150749,0.075798444,-0.0256703,0.007532823,-0.021045709,-0.013216846,-0.0034860938,-0.024301726,-0.041139994,-0.048633177,0.026542025,0.00844801,0.07058673,-0.0017241931,-0.031698223,-0.006383649,-0.025269944,0.05259256,0.09693313,-0.038270865,0.0018637825,0.060313016,0.017385116,0.009305987,0.019865664,-0.016944291,0.007714377,-0.022698505,0.04668,0.066623785,0.047951516,-0.006466907,-0.036602534,0.013360244,-0.029862458,0.034990612,-0.0039279237,-0.016673537,-0.008424382,0.010758543,0.02250929,0.013167619,0.035044372,-0.018617667,0.009935076,0.029358005,0.014850877,-0.019633934,-0.028039401,0.010540054,0.011807605,0.051394396,0.011245807,-0.087671824,0.02945928,-0.033058606,-0.060702592,-0.0040209754,0.020510655,-0.038847916,0.08662254,-0.04942282,0.015820596,-0.02525402,0.0225856,0.041189462,-0.009514744,0.017392963,-0.07063116,-0.005642411,-0.0018610074,-0.081959605,0.06599561,0.013421076]}]}","genkit:state":"success"},"displayName":"googleai/text-embedding-004","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"bdf553ee7f7a1446":{"spanId":"bdf553ee7f7a1446","traceId":"fb649a7310f3bd2917d10df8e50f2dc4","startTime":1752353167656,"endTime":1752353169164.5298,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"retriever","genkit:name":"astradb/rag_app","genkit:isRoot":true,"genkit:path":"/{astradb/rag_app,t:action}","genkit:input":"{\"query\":{\"content\":[{\"text\":\"some search term\"}],\"metadata\":{}}}","genkit:output":"{\"documents\":[{\"content\":[{\"text\":\" Please include what you were doing when this page came up and the Cloudflare Ray ID found at the bottom of this page.\\n          \"}],\"metadata\":{\"url\":\"https://www.classcentral.com/report/free-online-mba-top-b-schools/\"}},{\"content\":[{\"text\":\"\\n            Why have I been blocked?            This website is using a security service to protect itself from online attacks. The action you just performed triggered the security solution. There are several actions that could trigger this block including submitting a certain word or phrase, a SQL command or malformed data.\\n          \\n            What can I do to resolve this?\"}],\"metadata\":{\"url\":\"https://www.classcentral.com/report/free-online-mba-top-b-schools/\"}},{\"content\":[{\"text\":\" including submitting a certain word or phrase, a SQL command or malformed data.\\n          \\n            What can I do to resolve this?             You can email the site owner to let them know you were blocked. Please include what you were doing when this page came up and the Cloudflare Ray ID found at the bottom of this page.\\n          \"}],\"metadata\":{\"url\":\"https://www.classcentral.com/report/free-online-mba-top-b-schools/\"}},{\"content\":[{\"text\":\" search to return documents from the collection.\\nIngesting data\\nNow we can ingest some data into Astra DB. For this RAG application,  let's grab data from the web. To ingest web data, we'll need to fetch it from a URL and then extract the main content from the returned HTML. I've written before about how I like to use Readability.js to parse out the content from a page, so we'll follow that. We'll also need something to turn the content into chunks, let's use llm-chunk for this as it's relatively simple.\\nInstall the dependencies:\\nImport them at the top of the script:Write a function that takes a URL, fetches the HTML content, extracts the content and returns it.\\nThe next thing to do is write our first Genkit flow to ingest data from a URL into the collection. Flows are functions that you can run via the Genkit UI or through code. Flows have strongly defined input and output schemas using zod.\\nFor this flow we'll accept a string which is a URL. There's no need for an output as the function will just end when it\"}],\"metadata\":{\"url\":\"https://www.datastax.com/blog/rag-powered-chat-bot-genkit-astra-db#ingesting-data-2\"}},{\"content\":[{\"text\":\" URL and run the flow. Once it's complete, you can open the DataStax dashboard and see the chunks and their vectors stored in the  collection. Back in the Genkit UI you can click on View trace and youâ€™ll be shown each of the steps the flow took to fetch, chunk, embed and store the data.\\nHead back to the Genkit dashboard and open Retrievers from the sidebar. All we did to define the available retriever was set up the Astra DB plugin and export the astraDBRetrieverRef.\\nWe can already use that retriever from the Genkit UI. Click on the retriever and enter the following in the input:In the options, change the property k to 5. Run the retriever and it will perform a vector search using the text you provide in the input and returning five results from the database.\\nWe can now hook this up with a full RAG flow, in which we first retrieve context from the database and then pass it to a model to generate a response. Open the code again and define another flow: Here we use the retriever to search for the string input, and\"}],\"metadata\":{\"url\":\"https://www.datastax.com/blog/rag-powered-chat-bot-genkit-astra-db#ingesting-data-2\"}}]}","genkit:state":"success"},"displayName":"astradb/rag_app","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}}},"displayName":"astradb/rag_app","startTime":1752353167656,"endTime":1752353169164.5298}