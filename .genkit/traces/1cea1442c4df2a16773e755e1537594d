{"traceId":"1cea1442c4df2a16773e755e1537594d","spans":{"541dca6c4704aa0c":{"spanId":"541dca6c4704aa0c","traceId":"1cea1442c4df2a16773e755e1537594d","parentSpanId":"ee830ebbd3114688","startTime":1752353939970,"endTime":1752353941746.1665,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"embedder","genkit:name":"googleai/text-embedding-004","genkit:path":"/{astradb/rag_app,t:action}/{googleai/text-embedding-004,t:action,s:embedder}","genkit:input":"{\"input\":[{\"content\":[{\"text\":\"murder by a child\"}],\"metadata\":{}}],\"options\":{}}","genkit:output":"{\"embeddings\":[{\"embedding\":[0.0029090422,0.03676382,-0.07784601,-0.049269125,0.035647202,0.008239293,0.029790828,0.06771349,-0.003354204,0.00013083131,0.029772207,-0.07219236,0.011116162,-0.020046504,0.021203205,-0.033933476,-0.05500056,0.038623832,-0.06467791,0.06438485,0.053006347,0.027027579,0.021916687,-0.062242754,-0.010607462,-0.014439168,0.030645806,-0.00016307998,-0.015659438,-0.036379065,0.034078013,0.01124349,-0.006754301,-0.050619338,0.10768518,0.036376804,-0.0792257,-0.020498756,0.005202521,0.01996697,0.008837844,-0.009373043,0.0029653888,0.018848186,0.0064662946,0.032487873,0.012233661,-0.018256778,0.04189866,-0.023232142,-0.014707266,0.027218722,-0.0358059,0.005150221,0.0010973384,0.0033952668,-0.047108736,-0.05829776,0.0056603975,0.01712688,-0.0023723904,0.03190975,-0.043986678,-0.008177532,-0.019324787,-0.029154064,-0.008284591,-0.010163475,-0.060335502,-0.01633147,0.04096988,-0.0036211149,-0.025689699,0.04912421,0.009526639,0.011096558,0.011427506,-0.014122096,0.013435302,0.0506243,-0.07082638,-0.0057908823,0.0019499323,-0.0013247142,0.02220866,0.012130649,-0.05949323,-0.013626672,0.053134527,-0.035384633,0.05506418,-0.0131113,0.00437853,-0.030129284,0.030202402,0.0066493726,-0.028143505,-0.057667363,0.07569108,0.01702043,0.055805963,-0.012207746,-0.049756926,-0.039036576,0.019124517,0.05498831,0.01774879,0.032949317,-0.03980791,-0.038168833,-0.11111167,-0.034403212,-0.051022854,0.01340083,-0.073270574,0.027256215,-0.007849212,0.063889176,-0.031473357,-0.022857478,-0.06550674,-0.023970129,-0.031431384,0.00537539,0.017459648,0.025405651,0.045335963,0.008700796,-0.030528756,-0.034164988,-0.018282078,-0.018222237,0.03615835,0.035929732,-0.011999342,-0.05210357,0.03852163,0.003132039,-0.011273583,0.01329727,0.027886108,0.039826315,0.048627984,-0.027896043,-0.0030408392,-0.023375439,-0.028203988,0.013907108,0.06508964,0.09909946,-0.071658365,0.034091868,0.016291114,-0.053990155,-0.026456151,0.014242728,0.012555322,-0.03702194,0.009757802,-0.033301238,0.040778387,-0.014536156,0.021481173,0.03476672,-0.09238569,-0.033988614,0.043382805,-0.02563349,-0.0018793418,-0.0031741264,-0.012419872,0.0014036038,-0.03416785,-0.06455417,0.036828842,-0.011798664,-0.04918444,0.04507381,-0.045206793,-0.03631944,0.09132727,-0.0020826233,-0.003157932,-0.020172086,-0.029435141,0.012317026,0.08455635,0.08258406,0.059348088,-0.0069897478,-0.08432536,0.010976028,0.047479294,-0.008654247,-0.027168814,-0.030753616,-0.057153508,-0.017127583,0.014525308,0.005673158,0.000096661475,-0.01582729,0.0044940626,-0.040350966,-0.027617821,-0.0108787585,-0.03093009,-0.02041133,0.0043467265,-0.0036634158,0.034100812,0.033207368,-0.11853703,0.0008755206,-0.018031815,0.009973961,0.0059139,-0.051061075,0.03478614,0.06179064,0.048334524,0.022292301,0.052961543,-0.02238983,-0.06345931,-0.020828545,-0.057847317,0.007980221,-0.021468682,0.010343966,-0.001774785,-0.010790204,-0.04536711,-0.005858401,-0.0659325,0.036606062,0.018931834,0.01158471,0.011792502,0.0404075,-0.018174818,-0.039448377,-0.016113583,-0.021485839,-0.0105210375,0.011945379,-0.0059890267,0.096026376,-0.012209849,0.006761066,-0.012359683,-0.07178886,0.11653446,0.0035618534,0.019575795,-0.061109338,0.022289129,0.031850275,-0.0056732483,-0.021323817,0.037417926,-0.009432691,-0.056643885,-0.021264233,0.014775456,-0.060608134,-0.07072301,-0.043227572,0.020485934,-0.031022642,0.0064309365,0.061066803,-0.035149273,-0.05151885,-0.045854434,0.03855974,0.03876394,0.06229999,-0.088385455,-0.022320881,0.016891137,-0.01999726,-0.05695369,0.023761196,-0.021031434,-0.078502625,0.019058557,-0.012815206,0.018466588,-0.0058275303,0.044429675,0.0089518875,-0.0025213747,-0.022181237,-0.010777674,0.01756837,-0.025709005,-0.013091639,-0.0051930603,-0.014201732,0.025721006,0.049728654,-0.019285262,0.027879747,0.0009323131,0.03109779,0.017600125,-0.00067349075,-0.03404065,0.025169047,0.0020767944,-0.05101446,-0.023802383,-0.06412134,-0.037022047,-0.046203945,-0.04546427,-0.00017278847,0.01398915,0.05325806,0.020371618,0.03185133,-0.027987165,0.03612297,0.07823541,-0.019966362,0.01210187,0.018685862,0.020816367,-0.06273563,0.0122888405,-0.00046949147,-0.048425376,0.00054073293,0.052402955,0.0050553633,0.0011595374,0.0018387334,0.005518718,0.01755044,0.019791445,0.03977153,-0.04434885,-0.020377582,-0.02948586,-0.0031506694,-0.0006985116,-0.0076261484,-0.006853004,-0.0043284493,0.03816915,0.09991084,-0.022151953,-0.054776024,0.040205747,0.04479848,0.06291141,0.019483821,-0.0039026479,-0.024847135,0.028319474,0.05703217,-0.034370452,-0.010974466,-0.033107173,-0.057035197,0.023653066,0.0950526,0.019513076,0.035971843,-0.01761673,-0.015757596,-0.02328931,0.014597212,0.047548458,-0.006160543,-0.007437342,-0.001240903,-0.039035864,-0.018400075,-0.033024807,-0.062225226,-0.03396678,0.0032919147,-0.022103403,0.01720119,-0.027991366,-0.017078875,-0.0074714203,0.024447624,-0.021402657,0.03397657,0.026330974,0.0009706791,-0.00378305,0.02228407,0.01064654,0.0015344268,0.053446975,0.047724552,-0.027993701,0.052132457,0.039762024,0.020824382,-0.00761493,0.05522919,0.065371536,0.0070656072,0.012661459,-0.028152483,-0.03986859,0.016157843,-0.09118823,-0.02104198,0.0033684017,-0.018161139,-0.008417345,-0.011776822,0.04408028,0.04440626,-0.017594974,0.010976533,0.09389693,-0.042845134,0.0083796205,-0.014717356,-0.025639677,-0.016390152,0.013538019,0.011938014,0.038303863,0.06630868,0.0036413972,0.00065002835,0.020601286,-0.010201341,0.029569404,-0.020329658,0.006555022,-0.011416539,-0.033323627,-0.04167437,0.030909432,0.03827004,-0.009041252,0.019655865,0.050768092,0.015500694,-0.0041730795,-0.04686665,-0.017043103,-0.0017681298,-0.041686803,0.0023272005,-0.07388372,-0.007651301,0.019559113,0.010028351,-0.00051345956,0.005201466,-0.05823053,-0.04124813,0.08754294,0.055462625,0.031577073,0.015845729,-0.004909601,0.010387954,-0.03361991,0.044047,-0.05116888,0.040537246,-0.0029640463,-0.019090675,0.0011228158,0.05779889,0.026733756,0.0032553037,0.045400552,0.035305567,0.013837627,0.021614147,-0.029029293,0.007935436,0.002691178,-0.056691628,-0.0014742791,0.036203913,-0.006637468,0.019488102,-0.02039758,0.040799204,0.021043407,-0.031843994,-0.016002258,-0.0038213101,-0.00564454,-0.0058054044,0.036741942,0.003817254,0.013807046,-0.013546528,0.05650116,-0.019701807,0.02787054,-0.0397178,0.028015375,0.023292493,0.0028933699,0.048604075,0.0328437,-0.03277992,0.061996095,-0.01490977,0.04744693,0.049484875,-0.020454178,0.0064953775,-0.041481834,-0.029026547,-0.033822265,-0.015572785,0.004376382,-0.04696691,0.034017153,0.0260514,-0.009528644,0.039926488,0.04143392,0.02060458,-0.060155325,0.014841214,-0.024904877,0.033601385,0.0008698848,-0.013991828,-0.03885464,0.0090534855,-0.018883562,0.003844705,0.025104225,0.015749574,-0.000039255203,0.004185429,0.0060278834,0.005932874,-0.031303067,-0.02518417,0.019804353,0.006463927,0.03617329,0.010389477,0.014104345,-0.041047662,0.0052019553,0.04751597,0.08631948,0.00170929,-0.11398696,0.020661311,-0.03394844,-0.035254993,-0.0031098104,-0.004440393,-0.00069417956,0.011113364,-0.10190328,0.051627528,-0.01422745,0.046242602,0.044090036,0.038321186,0.04844815,0.030441761,0.0015710174,-0.00011452097,0.0027636825,0.03764595,-0.010372804,-0.025855081,-0.034501232,0.023479069,0.047622133,-0.015838647,0.00025424856,0.019176673,0.026402518,-0.077339694,0.015265546,0.0514348,0.025743205,-0.017955214,0.025327306,-0.017941626,-0.04064961,-0.029177936,0.018792141,0.04994275,-0.029519442,0.046526924,-0.023280187,0.047260024,-0.024377476,0.03197195,0.026243698,0.019857321,0.02417942,-0.0013696094,0.0062114825,-0.014576831,-0.0015655959,-0.005826811,-0.04378715,-0.024046252,-0.042256653,0.0029638216,0.021618053,0.0027621968,0.005724107,0.00356187,-0.07480759,0.010248255,-0.024123278,-0.030332118,-0.08267672,-0.0535684,-0.026631376,0.09234477,0.051891252,0.02280778,0.034806415,0.0020823646,0.0366703,-0.0041598943,-0.034027126,-0.015271273,-0.049725533,0.0012776664,0.011477322,0.022779454,0.029120892,0.007885082,0.14461422,-0.0075440067,-0.031621486,0.0695145,0.028230757,-0.014474115,0.03042242,0.011679125,0.018682383,-0.03504299,-0.033367645,-0.0061832946,-0.005577028,-0.04680676,-0.023532681,-0.03372215,-0.0122119365,-0.014562068,0.015195942,-0.056132015,-0.005575906,0.009644187,-0.024963258,-0.0074805203,0.03749209,0.027767755,-0.050532345,-0.04023014,-0.011730837,-0.041013386,-0.031445377,-0.026743745,-0.00012625619,-0.011294313,0.012519168,-0.030336866,0.019467996,0.046036832,0.0005961386,-0.0026939765,-0.021528503,0.03647767,0.015085838,0.004361458,0.0005379847,-0.0024345831,-0.005475289,-0.011231388,-0.023411037,0.01311305,-0.020677824,0.047387794,0.030276898,0.05110375,-0.123622954,0.0038183574,-0.00896098,-0.022075549,-0.019543994,0.010494427,0.01612262,-0.040241335,0.039989986,-0.015142623,0.021378579,-0.002530157,0.013370934,0.01007206,-0.04241872,-0.023537742,0.059708107,-0.050351415,0.0037414383,0.01885565,0.025445966,-0.04538327,-0.035584252,0.009096252,-0.009931427,-0.03716212,0.08507947,0.030312259,0.045967057,-0.0041487683,0.0455167,0.0009802649,-0.02633293,0.03239792,0.021617722,0.033713464,-0.037885226,0.030240444,-0.008923692,-0.061307713,-0.009870642,-0.02107892,0.010965603,0.07169793,-0.008216158,-0.01921532,0.0038831,-0.0013518335,0.01667334,0.019789068,-0.0263742,-0.017869918,-0.017652173,-0.042529296,-0.08112487,-0.02570901,0.0054457355,0.02375976,0.030890066,-0.017688481,0.0033178793,-0.0049584825,0.06524184,-0.012147553,0.004663648,0.066771045,-0.040821254,0.038810495,0.01690865,-0.012718533,0.038851883,-0.0052212635]}]}","genkit:state":"success"},"displayName":"googleai/text-embedding-004","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"ee830ebbd3114688":{"spanId":"ee830ebbd3114688","traceId":"1cea1442c4df2a16773e755e1537594d","startTime":1752353939970,"endTime":1752353942742.4297,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"retriever","genkit:name":"astradb/rag_app","genkit:isRoot":true,"genkit:path":"/{astradb/rag_app,t:action}","genkit:input":"{\"query\":{\"content\":[{\"text\":\"murder by a child\"}],\"metadata\":{}}}","genkit:output":"{\"documents\":[{\"content\":[{\"text\":\" Please include what you were doing when this page came up and the Cloudflare Ray ID found at the bottom of this page.\\n          \"}],\"metadata\":{\"url\":\"https://www.classcentral.com/report/free-online-mba-top-b-schools/\"}},{\"content\":[{\"text\":\"\\n            Why have I been blocked?            This website is using a security service to protect itself from online attacks. The action you just performed triggered the security solution. There are several actions that could trigger this block including submitting a certain word or phrase, a SQL command or malformed data.\\n          \\n            What can I do to resolve this?\"}],\"metadata\":{\"url\":\"https://www.classcentral.com/report/free-online-mba-top-b-schools/\"}},{\"content\":[{\"text\":\" generate a response. Open the code again and define another flow: Here we use the retriever to search for the string input, and  then pass the resulting documents as part of a prompt to the generate function that uses the Gemini Flash 2.0 model to perform the generation.\\nRestart the Genkit server, open up the Flows section and choose your RAG flow. You can now input a question, make sure it's relevant to the data you indexed, and Gemini will generate a relevant response based on the docs.Once again, you can hit the View trace button to see what happened at each stage in this request.\\nWe've only used these flows in the Genkit interface so far, but for either of the flows, you can run them like: Genkit and Astra DB make RAG easy\\nIt took us fewer than 100 lines of code to build the two major flows required for RAG: ingestion and generation. Firebase Genkit made it easy to test our implementation as we went—without us having to build a UI for it. And the tracing in Genkit means it's easier to track down bugs in your\"}],\"metadata\":{\"url\":\"https://www.datastax.com/blog/rag-powered-chat-bot-genkit-astra-db#ingesting-data-2\"}},{\"content\":[{\"text\":\" including submitting a certain word or phrase, a SQL command or malformed data.\\n          \\n            What can I do to resolve this?             You can email the site owner to let them know you were blocked. Please include what you were doing when this page came up and the Cloudflare Ray ID found at the bottom of this page.\\n          \"}],\"metadata\":{\"url\":\"https://www.classcentral.com/report/free-online-mba-top-b-schools/\"}},{\"content\":[{\"text\":\" search to return documents from the collection.\\nIngesting data\\nNow we can ingest some data into Astra DB. For this RAG application,  let's grab data from the web. To ingest web data, we'll need to fetch it from a URL and then extract the main content from the returned HTML. I've written before about how I like to use Readability.js to parse out the content from a page, so we'll follow that. We'll also need something to turn the content into chunks, let's use llm-chunk for this as it's relatively simple.\\nInstall the dependencies:\\nImport them at the top of the script:Write a function that takes a URL, fetches the HTML content, extracts the content and returns it.\\nThe next thing to do is write our first Genkit flow to ingest data from a URL into the collection. Flows are functions that you can run via the Genkit UI or through code. Flows have strongly defined input and output schemas using zod.\\nFor this flow we'll accept a string which is a URL. There's no need for an output as the function will just end when it\"}],\"metadata\":{\"url\":\"https://www.datastax.com/blog/rag-powered-chat-bot-genkit-astra-db#ingesting-data-2\"}}]}","genkit:state":"success"},"displayName":"astradb/rag_app","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}}},"displayName":"astradb/rag_app","startTime":1752353939970,"endTime":1752353942742.4297}